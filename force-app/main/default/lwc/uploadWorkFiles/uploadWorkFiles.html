<!--
  @description       : 
  @author            : ChangeMeIn@UserSettingsUnder.SFDoc
  @group             : 
  @last modified on  : 08-12-2025
  @last modified by  : ChangeMeIn@UserSettingsUnder.SFDoc
-->
<template>
    <lightning-modal-header label="Upload Work Files Modal"></lightning-modal-header>

    <div class="mainBody">
        <div class="bodyHolder">
            <lightning-spinner lwc:if={uploadStarted} alternative-text="Loading" size="medium"></lightning-spinner>
            <lightning-input lwc:else
              type="file" 
              label="Select Files" 
              accept=".pdf"
              multiple 
              onchange={handleFiles}>
            </lightning-input>
        </div>
        <template if:true={roleChecked}>
        <div class="filesSection slds-m-left_large slds-p-vertical_medium">
            <div>Files ready for Upload:</div>
            <template for:each={files} for:item="file" for:index="ind">
                <!-- <div  class="fileHolder">{file.name}</div> -->
                <div key={file.name}  class="slds-grid slds-wrap slds-gutters">
                    <div class="slds-col slds-size_1-of-6">
                        <lightning-input
                            type="text"
                            label="File Name"
                            value={file.name}
                            read-only="true"
                            class="name-input">
                        </lightning-input>
                    </div>
                    <div class="slds-col slds-size_2-of-6">
                        <lightning-input data-key={file.name}
                            type="text"
                            label="Change Reason"
                            value={file.reason}
                            required={isNotEngineer}
                            class="reason-input"
                            onchange={handleChange}
                            disabled={uploadStarted}>
                        </lightning-input>
                    </div>
                    <div class="slds-col slds-size_2-of-6">
                        <lightning-textarea data-key={file.name}
                            label="Description"
                            value={file.description}
                            required={isNotEngineer}
                            class="description-input"
                            onchange={handleChange}
                            disabled={uploadStarted}>
                        </lightning-textarea>
                    </div>
                    <div class="slds-col slds-size_1-of-6">
                        <lightning-button data-key={file.name} 
                            variant="base" 
                            label="Remove" 
                            title="Remove File" 
                            onclick={handleClick} 
                            class="slds-m-left_x-small slds-m-top_medium"
                            disabled={uploadStarted}>
                        </lightning-button>
                    </div>
                </div>
            </template>
        </div>
        </template>
    </div> 
    
    <!-- <lightning-modal-body> Content: {content} </lightning-modal-body> -->
    <lightning-modal-footer>
        <lightning-button variant="brand" label="Upload Files" disabled={disableUpload} onclick={handleUpload}></lightning-button>
        <!-- <lightning-button label="Download Zip" disabled={disableDownload} onclick={handleDownload}></lightning-button> -->
    </lightning-modal-footer>
</template>